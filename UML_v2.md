Nota: Todo float se ingresa a 2 decimales.

- database
    - personal
        - colaborador (uid):
            - nombre: string (alta)
            - a_paterno: string (alta)
            - a_materno: string (alta)
            - nickname: string (alta)
            - email: string (alta)
            - foto_url: string
            - areas: (al dar de alta, no necesito llenar en false los que no tengo. min 1 área)
                - proyectos: boolean
                - produccion: boolean
                - compras: boolean
                - administracion: boolean
                - rrhh: boolean
            - credenciales: (0 sisadmin, 1 director, 2 lider de area, 3 colaboradores simples) (alta)
            - especialidad
                - ie: boolean
                - ihs: boolean
            - habilitado: boolean (acceso al sistema) (alta)
        - listas
            - areas
                - area 
                    - id_colaborador
            - habilitado
                - id_colaborador: true
            - deshabilitado
                - id_colaborador:: true
            - credenciales
                - credenciales
                    - id_colaborador: true
    - clientes
        - despachos
            - cliente (id_firebase)
                - clave_cliente: string (Mayúsculas, letras y números)
                - nombre: string
                - telefono: string
                - direccion
                    - estado: string
                    - ciudad: string
                    - colonia: string
                    - codigo_postal: string
                    - calle: string
                    - numero_exterior: string
                    - numero_interior: string
        - obras
            - cliente (id_firebase)
                - obra (obra_id): true
        - contactos
            - cliente (id_firebase)
                - contacto (firebase_id)
                    - prefijo: string
                    - nombre: string
                    - a_paterno: string
                    - a_materno: string
                    - area: string
                    - celular: string
                    - email: string
                    - extension: string
        - habilitados
            - clientes (id)
                - nombre
        - deshabilitados
            - clientes (id)
                - nombre
        -num_contactos
            - clientes(id)
                - cantidad: int
    - info_web
        - version: float
    - administracion:
        - flujos
            - pagos
                - pagos (firebase_id)
                    - id_obra: string
                    - concepto: string
                    - fecha_pago: float (timestamp)
                    - comprobante_url: string
                    - folio: string
                    - formato: string
                    - monto: float
                    - tipo_pago: string
                    - distribucion
                        - entradas (id generado "ANT-clave_proc o "EST_clave_proc")
                            - clave__subproc: string
                            - formato: string
                            - monto_pacial: float
            - obras
                - obras (id_obra)
                    - pagos
                        - pagos_id: true
            - fechas
                - aaaa
                    - mm
                        - dd
                            - pagos
                                -pagos_id: true
            - folios
                - folio_pago: string (el mismo del pago)
                    - pagos
                        - pagos_id: true
    - obras
        - obras
            - obra: (firebase_id)
                - nombre: string
                - cliente_id: string
                - clave_obra: string
                - terminada: true (true cuando todos los "terminado" de procesos son true)
                - activa: true (para ddls)
                - direccion
                    - estado: string
                    - ciudad: string
                    - colonia: string
                    - cp: int
                    - calle: string
                    - numero: string
                - retencion_fondo_garantia: float [0 a 1]
                - fechas:
                    - fecha_inicio_real: timestamp 
                    - fecha_inicio_teorica: timestamp (al dar de alta/edicion)
                    - fecha_final_real: timestamp
                    - fecha_final_teorica: timestamp (al dar de alta/edicion) 
                - supervisor (solo pueden ser colaboradores con área de producción)
                    - supervisor (uid)
                        - nombre
                        - activo: bool
                        - fechas (lista ya que puede haber varios ingresos)
                            - fecha_ingreso (aaaammdd)
                                - fecha_ingreso: timestamp
                                - fecha_salida: timestamp
        - procesos
            - id_obra
                - num_procesos: int (se inicializa en 0)
                - procesos (3 por default, ADIC, MISC y PC00 y los subprocesos clon de MISC y PC00)
                    - proceso (por clave - generada por nosotros):
                        - nombre: string (en alta)
                        - alcance: string ( en alta)
                        - fechas
                            - fecha_inicio_real: timestamp 
                            - fecha_inicio_teorica: timestamp (al dar de alta/edicion)
                            - fecha_final_real: timestamp
                            - fecha_final_teorica: timestamp (al dar de alta/edicion) 
                        - terminado: boolean (se termina hasta que todos los subprocesos están terminados)
                        - num_subprocesos: int (se inicializa en 0)
                        - subprocesos (en cada proceso se genera automáticamente una copia como subproceso menos en ADIC. MISC solo se tiene a sí mismo como subproceso) (Por default)
                            - subproceso (por clave):
                                - nombre: string
                                - alcance: string
                                - fechas
                                    - fecha_inicio_real: timestamp 
                                    - fecha_inicio_teorica: timestamp (al dar de alta/edicion)
                                    - fecha_final_real: timestamp
                                    - fecha_final_teorica: timestamp (al dar de alta/edicion) 
                                - categoria: string (de db categorias)
                                - terminado: boolean (definir manera de actualizar este valor. Empieza en false)

                                - precio_venta: float
                                - costo_suministros:float
                                - precopeo: float
                                - SCORE 
                                    - horas_programadas: (en horas)
                                    - costo_hora: float (2 decimales)
        - copeo 
            - id_obra
                - subproceso_clave
                    - impuestos: float (0 a 1)
                    - num_entradas: int
                    - entradas
                        - entrada (num)
                            - nombre: string
                            - alcance: string
                            - subtotal: float
                            - cuadrilla:
                                - ayudante
                                    - cantidad: int
                                    - sueldo_diario: float (sin impuestos)
                                - medio_oficial
                                    - cantidad: int
                                    - sueldo_diario: float (sin impuestos)
                                - oficial
                                    - cantidad: int
                                    - sueldo_diario: float (sin impuestos)
                                - encargado
                                    - cantidad: int
                                    - sueldo_diario: float (sin impuestos)
                                - supervisor
                                    - cantidad: int
                                    - sueldo_diario: float (sin impuestos)
                            - multiplicadores
                                - dias: float
                                - unidades: float 
        - presupuesto: (adic o pc00. pc00-misc = "") (DEFINIR CON RAY)
            - id_obra
                - presupuestos (id del subproceso)

        - listas (al dar de alta se ingresa en obras_activas )
            - obras_terminadas
                - id_obra
                    - obra_nombre:string
            - obras_no_terminada
                - id_obra
                    - obra_nombre: string
            - obras_activas
                - id_obra
                    - obra_nombre: string
            - obras_no_activas
                - id_obra
                    - obra_nombre: string
            (en listas fechas true = fecha real y false = fecha programada)
            - fechas_obra_inicio:
                - PROG
                    - aaaa
                        - mm
                            - dd
                                - id_obra: true
                - REAL
                    - aaaa
                        - mm
                            - dd
                                - id_obra: true
            - fechas_obra_fin:
                - PROG
                    - aaaa
                        - mm
                            - dd
                                - id_obra: true
                - REAL
                    - aaaa
                        - mm
                            - dd
                                - id_obra: true
    - datos_referencia
        - cuadrilla:
            - id_puesto
                - puesto: string
                - sueldo: float (semanal)
        - especialidad_mo:
            - firebase_id
                - especialidad (nombre): true
        - categorias_procesos
            - categoria (id)
                - nombre: string
                - clave: string
        - exclusiones
            - exclusion_id: nombre
        - requisitos
            - requisito_id: nombre
        - diversos
            - diverso_id: nombre
    - proyectos
        - registros
            - registro (firebase_id)
                - checkin: timestamp
                - checkout: timestamp
                - colaborador_id: string
                - obra_id: string
                - subproceso_clave: string
                - especialidad: string
        - listas
            - fechas
                - aaaa
                    - mm
                        - dd
                            - id_registro: true
            - colaboradores
                - colaborador_id
                    - id_registro: true
            - obra_id
                - subproceso
                    - id_registro: true
            - registros_activos (sirve para eliminar corruptos y revisar quienes siguen activos)
                - aaaammdd
                    - id_colaborador: id_registro
            - registros_corruptos (los que checkout - checkin > dia, cada vez que genero un checkout reviso)
                - id_registro: true
    - rrhh
        - mano_obra:
            - trabajador(firebase_id:
                - id_head: string
                - id_pagadora: string
                - nombre: string
                - fecha_antiguedad: timestamp
                - id_puesto: sstring (obtener de datos_referencia -> cuadrilla)
                - id_especialidad: string
                - sueldo_base: float (semanal)
                - id_jefe: string (Se obtiene de destajistas) (trabajador por parte de HEAD no tiene este atributo)
                - activo: boolean
                - destajista: boolean
                - claves:
                    - RFC: string
                    - IMSS: string
                    - CURP: string
                - info_personal
                    - fecha_nacimiento: timestamp
                    - estado_civil: string
                    - sexo: string
                    - domicilio: string
                    - codigo_postal: string
                - datos_bancarios:
                    - banco: string
                    - cuenta: string
                    - clabe: string
                - tallas:
                    - camisa: string (S, M, L, XL ...) desde el HTML
                    - pantalon: string (concatenar int + "x" + int) cintura/largo
                    - zapatos: float
            - listas
                - destajistas
                    - id_destajista (firebase)
                        - id_trabajador: true
                    - HEAD
                        - id_trabajador: true
                - activos
                    - id_trabajador: true
                - no_activos
                    - id_trabajador: true
                - puesto
                    - id_puesto
                        - id_trabajador: true
                - especialidad
                    - id_especialidad
                        - id_trabajador: true

        - pagos_nomina:
            - registro (firebase_id):
                - trabajador_id: string
                - año: int
                - sem: int
                - sueldo_semanal: float
                - asistencia
                    - dia (lu,ma, mi, ju, vi)
                        - obra: obra_id
                        - ssubproceso: subproceso
                        - actividad: string(asistencia, falta o vacaciones)
                - h_extras
                    - entrada (firebase_id)
                        - fecha: timestamp
                        - obra: obra_id
                        - subproceso: subproceso_id
                        - cantidad_horas: int
                        - pago_h_extras: float
                - diversos
                    - entrada (firebase_id)
                        - tipo: string (se obtiene de diversos)
                        - obra: obra_id
                        - subproceso: subproceso_id
                        - total: float

        - nomina
            - year: (ej 2019)
            - semana: (ej 1)
                - lunes:
                    - obra (nombre) 
                    - proceso (clave) (Si obra es "Atencion a Clientes" proc es cliente, "Vacaciones" si Vacaciones)
                    - asistencia (bool)
                - martes:
                    - obra (nombre) 
                    - proceso (clave) (Si obra es "Atencion a Clientes" proc es cliente, "Vacaciones" si Vacaciones)
                    - asistencia (bool)
                - miercoles:
                    - obra (nombre) 
                    - proceso (clave) (Si obra es "Atencion a Clientes" proc es cliente, "Vacaciones" si Vacaciones)
                    - asistencia (bool)
                - jueves:
                    - obra (nombre) 
                    - proceso (clave) (Si obra es "Atencion a Clientes" proc es cliente, "Vacaciones" si Vacaciones)
                    - asistencia (bool)
                - viernes:
                    - obra (nombre) 
                    - proceso (clave) (Si obra es "Atencion a Clientes" proc es cliente, "Vacaciones" si Vacaciones)
                    - asistencia (bool)
                - horas_extra:
                    - por push:
                        - fecha (timestamp)
                        - obra 
                        - proceso (Si obra es "Atencion a Clientes" proc es cliente)
                        - horas (en horas)
                - diversos
                    - por push:
                        - cantidad
                        - distribuible: bool
                        - obra: ("NA" si distribuilble == true) 
                        - proceso: ("NA" si distribuilble == true) (Si obra es "Atencion a Clientes" proc es cliente)
                        - diverso (nombre de un catálogo)
                - total_diversos (No incluyen impuestos)
                - total_horas_extra (en $ y sin impuestos)
                - total_asistencia (sueldo_base * asistencias)
                - impuestos:
                    - impuestos_horas_extra
                    - impuestos_diversos
                    - impuestos_asistencia (pagadora_trabajador - 3 totales - impu_div - impu_HE)
                - total (pagadora)
        - pagos_nomina: 
            - AFECTAN: app_pagos_nomina, app_asistencia
            - SUSCRIBEN: 
            - year: (ej 2019)
                - semana: (ej 1)
                    - terminada: bool
                    - asistencias_terminadas: bool
                    - horas_extra_terminadas: bool
                    - diversos_terminados: bool
                    - total
                    - obra: (por nombre) (Una es "Atencion a Clientes")
                        - total (refleja TOTAL de kaizen)
                        - trabajadores:
                            - trabajador: (por id)
                                //- nombre NOSTA
                                - dias 
                                    - lunes:
                                    - asistencia: bool
                                    - proceso: (clave) "NA" si asistencia es false, "vacaciones" si obra es vacaciones
                                    - martes:
                                    - asistencia: bool
                                    - proceso: (clave) "NA" si asistencia es false, "vacaciones" si obra es vacaciones
                                    - miercoles:
                                    - asistencia: bool
                                    - proceso: (clave) "NA" si asistencia es false, "vacaciones" si obra es vacaciones
                                    - jueves:
                                    - asistencia: bool
                                    - proceso: (clave) "NA" si asistencia es false, "vacaciones" si obra es vacaciones
                                    - viernes:
                                    - asistencia: bool
                                    - proceso: (clave) "NA" si asistencia es false, "vacaciones" si obra es vacaciones
                                - horas_extra:
                                    - push:
                                    - horas (EN $)
                                    - proceso (clave)
                                    - fecha (ms, de un datepicker, es de cuando se trabajaron, no de cuando se pagan)
                                - diversos (SE GUARDAN HASTA EL TERMINAR, POR LOS DISTRIBUIBLES)
                                    - por push: (si es distribuido se hacen entradas separadas)
                                    - cantidad
                                    - proceso 
                                    - diverso (nombre de un catálogo)
                                - total_horas_extra (en $ y No incluyen impuestos)
                                - total_diversos (No incluyen impuestos)
                                - total_asistencia
                                - impuestos:
                                    - impuestos_horas_extra
                                    - impuestos_diversos
                                    - impuestos_asistencia (impuestos_asistencia_trabajador * asistencias_esta_obra/asistencias totales)
                                - total (subtotal + impuestos)
DEFINIR DESPUÉS
    
- destajistas: 
    - AFECTAN: app_destajistas
    - SUSCRIBEN:
    - destajista: (por nombre)
        - nombre
        - telefono
        - cuenta_bancaria
        - especialidad: ("IE"/"IHS"/"Ambas")
- buzon: * ()
    - mensaje (por uid, solo los no leidos)
        - destinatario (uid)
        - remitente (uid)
        - mensaje
        - leido
        - timestamps
            - enviado
            - leido
- administracion
   - centro de costos
      - familia(nombre)
         - nombre
         - clave (definir!)
         - years
            - 2019: total (en float)
            - 2020: total (en float)
            - etc
         - children:
            - cuenta (por nombre)
               - nombre
               - clave
               - total_cuenta (si no es hoja es suma)
               - ppto_cuenta (si no es hoja es suma)
               - forma_pago (GR, MIX, NA o (se me olvidó la ultima)) (si no es hoja es suma (O sea si solo un tipo en hojas ese, si hay mas entonces MIX))
               - formato_fecha ("diario", "semanal", "quincenal", "mensual", "anual") (Hay que definir con lo del formato)
               - areas_lectura: (si no es hoja es suma)
                  - *todas las áreas que tienen acceso a esta cuenta, en bool
               - areas_edicion: (si no es hoja es suma)
                  - *todas las áreas que tienen acceso a esta cuenta, en bool
               - children: "" si es hoja, si es nodo repite el formato json
               - REGISTROS EN RAMA APARTE
               - registros (si no es hoja NO puede existir, Hay que redistribuirlos a las hojas)
                  - year (por numero)
                     - total_year
                     - semanas ???? O mensual? o que dependa del formato?? Hay que definir
                        - semana (por numero)???
                           - total_semana???
                           - registro (por uid)
                              - monto
                              - timestamps
                                 - ingreso (cuando se hace el registro)
                                    - user: (username de quien lo hace)
                                    - fecha (timestamp)
                                 - fecha (de cuando es el valor)
                                 - modificaciones:
                                    - por push
                                       - user: uid
                                       - fecha: timestamp
                              - concepto
                              - cantidad //para compras? :/
                              - clave_concepto //para compras? :/
        
- investime
    - usuarios
        - uid
            - habilitado: boolean
            - registros
                - año (ej 2019)
                    - semana (ej 3)
                        - registro (id_firebase)
                            - familia: string
                            - subfamilia: string
                            - actividad: string
                            - activo: boolean
                            - checkin: timestamp
                            - checkout: timestamp
                            - colaborador:string (por uid)
                            - status_obra: string
    - familias
        - Globales
            - subfamilias (por nombre)
                - actividades: actividades
        - Especificos
            - actividades: actividades
        - Rutinarios
            - actividades: actividades

- estimaciones (pendiente con matricial)
    - obra (uid)
        - estimacion (firebase_id)
            - fechas
                - fecha_regisro: timestamp
                - fecha_inicio: timestamp
                - fecha_fin: timestamp
            - numero_estimacion: int (semi automatico) 
            - distribucion
                        - contrato_compras (en hoja menos en IQONO MEXICO, ahi en proc)
                        - clave
                        - solpeds
                            - solped (por clave)
                                - nombre
                                - fecha
                                - foto
                                - subproceso (Solo en IQONO MEXICO, menos en MISC)
                                - autorizacion
                                - odecs 
                                    - odec (por clave)
                                    - proveedor (clave)
                                    - costo
                                    - pad
                                    - fecha
                                    - cotizaciones(DEFINIR)
                                    - notas
                                    - pdfs
                                        - pdf(consecutivo)
                                            - proveedor
                                            - pdf (link)
                                    - remisiones (DEFINIR)
                                    - pagos
                                        - pago (por push?)
                                            - cantidad
                                            - tipo (CO, CR, CH, EF, NC o DE)
                                            - no_factura (si cr, si no "")
                                            - notas
                                            - fecha
                                            - pdf (factura si CR, evidencia si no)

    - presupuesto: (adic o pc00. pc00-misc = "") (DEFINIR CON RAY)
        - id_obra
            - presupuestos (id del subproceso)
                - terminado
                - nombre
                - fisc_bool
                - banc_bool
                - imagenes
                    - index (int)
                    - url
                - fecha_ppto (timestamp)
                - titulo_ppto
                - nombre
                - tiempoEntrega
                - json_excel (SI ADIC)
                - json_alcance (SI PC00)
                - anticipo
                - exc_lista
                - reqs_lista
                - atn_lista
                - validacion_ppto
                    - precio_negociado
                    - documento_evidencia

ANEXO

- kaizen: (Mayúsculas en caso de que haga falta llenarlas desde un excel)
  - PROYECTOS:
     - PPTO -> Admin/prod
     - PAG -> SCORE (yo)
  - PRODUCCION:
     - SUMINISTROS:
        - CUANT -> Proyectos
        - OdeC -> Compras
        - PAG -> Compras
     - COPEO:
        - PREC -> supervisor
        - COPEO -> supervisor
        - PAG -> rrhh
  - ADMINISTRACION:
     - ESTIMACIONES:
        - PPTO -> admin
        - EST -> supervisor
        - PAG -> admin
     - ANTICIPOS:
        - PPTO -> admin
        - PAG -> admin
  - PROFIT:
     - PROG:
        - BRUTO -> NADIEEEEE
     - REAL:
        - BRUTO -> NADIEEEEE