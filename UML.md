- administracion:
   - flujos
      - obra (por nombre)
         - total
         - procesos: (si obra simple, directo "pagos" con todo lo que contiene)
            - proceso (por nombre):
               - total
               - subprocesos: (si proc simple, directo "pagos" con todo lo que contiene)
                  - subproceso (por nombre):
                     - total
                     - ingresos
                        - cu (por push)
                           - fecha_pago
                           - fecha_registro
                           - folio
                           - formato ("estimacion" o "anticipo")
                           - monto
                           - pad: pad*
                           - tipo_pago: ("recibo" o "factura")
                           - file: url
   - investime
      - registros
         - año (ej 2019)
            - semana (ej 3)
               - registro (por uid)
                  - familia
                  - subfamilia
                  - actividad
                  - activo
                  - checkin
                  - checkout
                  - colaborador (por uid)
                  - status_obra
      - familias
         - Globales
            - subfamilias (por nombre)
               - actividades: actividades
         - Especificos
            - actividades: actividades
         - Rutinarios
            - actividades: actividades
   - centro de costos
      - familia(nombre)
         - nombre
         - clave (definir!)
         - years
            - 2019: total (en float)
            - 2020: total (en float)
            - etc
         - children:
            - cuenta (por nombre)
               - nombre
               - clave
               - total_cuenta (si no es hoja es suma)
               - ppto_cuenta (si no es hoja es suma)
               - forma_pago (GR, MIX, NA o (se me olvidó la ultima)) (si no es hoja es suma (O sea si solo un tipo en hojas ese, si hay mas entonces MIX))
               - formato_fecha ("diario", "semanal", "quincenal", "mensual", "anual") (Hay que definir con lo del formato)
               - areas_lectura: (si no es hoja es suma)
                  - *todas las áreas que tienen acceso a esta cuenta, en bool
               - areas_edicion: (si no es hoja es suma)
                  - *todas las áreas que tienen acceso a esta cuenta, en bool
               - children: "" si es hoja, si es nodo repite el formato json
               - REGISTROS EN RAMA APARTE
               - registros (si no es hoja NO puede existir, Hay que redistribuirlos a las hojas)
                  - year (por numero)
                     - total_year
                     - semanas ???? O mensual? o que dependa del formato?? Hay que definir
                        - semana (por numero)???
                           - total_semana???
                           - registro (por uid)
                              - monto
                              - timestamps
                                 - ingreso (cuando se hace el registro)
                                    - user: (username de quien lo hace)
                                    - fecha (timestamp)
                                 - fecha (de cuando es el valor)
                                 - modificaciones:
                                    - por push
                                       - user: uid
                                       - fecha: timestamp
                              - concepto
                              - cantidad //para compras? :/
                              - clave_concepto //para compras? :/
- categorias:
   - categoria (por nombre)
      - nombre
      - clave
- clientes
   - cliente (por nombre)
      - clave
      - nombre
      - telefono
      - ppto_especial (bool, ahorita solo lo tiene migdal, solo hace falta si requiere la segunda version del ppto adic)
      - atencion
         - numero (por push pero de array, 0,1,2)
            - area
            - celular
            - email
            - extension
            - nombre
      - direccion
         - calle
         - ciudad
         - colonia
         - cp
         - delegacion
         - numero
- compras
   - num_proveedores_id
   - proveedores
      - proveedor (por ref)
         - razonSocial
         - direccion
         - telefono
         - atiende
         - RFC
- info_web
   - version
- mensajes
   - mensaje (por uid)
      - destinatario (uid)
      - remitente (uid)
      - mensaje
      - leido
      - timestamps
         - enviado
         - leido
- obras (magico)
   - AFECTAN: app_obra app_obras_prod app_procesos
   - SUSCRIBEN: app_procesos app_asistencia app_desplegar_procesos app_kaizen_global app_presupuesto
   - obra: (por nombre)
      - nombre
      - cliente (nombre)
      - clave
      - terminada
      - direccion
         - calle
         - numero
         - colonia
         - delegacion
         - ciudad
         - cp
      - num_procesos
      - utilidad_semanal
      - fechas:
         - fecha_inicio_real
         - fecha_inicio_teorica
         - fecha_final_real
         - fecha_final_teorica
      - kaizen: *
      - supervisor 
         - supervisor (por id)
            - nombre
            - activo: bool
      - procesos:
         - proceso (por clave):
            - alcance
            - clave
            - fecha_inicio
            - fecha_final
            - kaizen: *
            - porcentaje_indirectos ([0-100] en hoja)
            - nombre
            - num_subprocesos
            - terminado
            - tipo: "adicional"/"continuo"/"miscelaneo"/"proyecto"
            - validacion_ppto
               - precio_negociado
               - documento_evidencia
               - aprobado (bool)
            - copeo (SOLO EN HOJA)
               - total (con impuestos)
               - subtotal (suma de totales de entradas, sin impuestos)
               - impuestos (en porcentaje)
               - num_entradas
               - entradas
                  - entrada (por consec)
                     - nombre
                     - alcance
                     - pad
                     - total (sin impuestos)
                     - cuadrilla:
                        - ofi
                        - mof
                        - ayu
                        - enc
                        - sup
                     - multiplicadores:
                        - dias
                        - unidades
            - SCORE (SOLO EN HOJA)
               - total_prog (en horas)
               - total_trabajado (en horas)
               - programado:bool (horas definidas, una vez)
               - inges
                  - inge (por uid)
                     - horas_trabajadas (en horas) 
                     - horas_programadas (en horas)
            - subprocesos:
               - subproceso (por clave):
                  - alcance
                  - categoria
                  - clave
                  - fecha_inicio
                  - fecha_final
                  - kaizen: *
                  - terminado
                  - (obsoleto) contrato
                  - nombre
                  - contrato_compras: igual que proc
                  - validacion_ppto: igual que proc
                  - SCORE: igual que proc simple
                  - copeo: igual que proc simple
                  - presupuesto: (solo en adic y pc00, pc00-misc = "")
                     - terminado
                     - nombre
                     - archivos:
                        - por index (0,1,2)
                           - pdf
                           - pad
            - contrato_compras (en hoja menos en IQONO MEXICO, ahi en proc)
               - clave
               - solpeds
                  - solped (por clave)
                     - nombre
                     - fecha
                     - foto
                     - subproceso (Solo en IQONO MEXICO, menos en MISC)
                     - autorizacion
                     - odecs 
                        - odec (por clave)
                           - proveedor (clave)
                           - costo
                           - pad
                           - fecha
                           - cotizaciones(DEFINIR)
                           - notas
                           - pdfs
                              - pdf(consecutivo)
                                 - proveedor
                                 - pdf (link)
                           - remisiones (DEFINIR)
                           - pagos
                              - pago (por push?)
                                 - cantidad
                                 - tipo (CO, CR, CH, EF, NC o DE)
                                 - no_factura (si cr, si no "")
                                 - notas
                                 - fecha
                                 - pdf (factura si CR, evidencia si no)
- personal (magico) (supervisores son los que estan en prod, se ven en obra)
  - uid (como key):
    - areas:   
      - proyectos: boolean
      - produccion: boolean
      - compras: boolean
      - administracion: boolean
      - rrhh: bool
    - credenciales: (0 sisadmin, 1 director, 2 lider de area, 3 los demas, 4 bajas/glitches)
    - esp (si tienes area proy, "ie", "ihs")
    - status (si tienes area proy, true si trabajando)
    - uid: uid
    - nombre: string
    - nickname: ? string
    - email: string
    - activo
    - foto
    - buzon:
       - mensaje (por uid, solo los no leidos)
          - destinatario (uid)
          - remitente (uid)
          - mensaje
          - leido
          - timestamps
             - enviado
             - leido
- produccion
   - costos_cuadrilla:
      - ofi
      - mof
      - ayu
      - enc
      - sup
   - destajistas: 
      - AFECTAN: app_destajistas
      - SUSCRIBEN:
      - destajista: (por nombre)
         - nombre
         - telefono
         - cuenta_bancaria
         - especialidad: ("IE"/"IHS"/"Ambas")
- proyectos
   - registros
      - year
         - semana
            - registro (por cu)
               - checkin
               - esp
               - horas (en ms)
               - inge (uid)
               - obra
               - proceso (este es nuevo)
               - status
   - cuantificaciones
      - obra (por nombre)
         - year
            - semana
               - cuantificacion (por push)
                  - monto
                  - descripcion
                  - proceso (clave de proc, subp u obra)
                  - pad: pad*
- rrhh
   - diversos
      - diverso (por nombre)
         - nombre
         - distribuible (generalmente, no forzoso)
   - num_trabajadores_id: int (actualizado en app_rrhh_trabajadores y app_rrhh_importar_trabajadores)
   - trabajadores:
      - AFECTAN: app_trabajadores
      - SUSCRIBEN: app_asistencia
      - trabajador(por id):
         - puesto
         - sueldo_base
         - jefe (nombre destajista o HEAD)
         - nombre
         - id_trabajador
         - fecha_antiguedad
         - obra_asignada:
            - 0 (1,2,3, lista): nombre
         - especialidad
         - activo: bool
         - claves:
            - RFC
            - IMSS
            - CURP
         - info_personal
            - fecha_nacimiento
            - estado_civil
            - sexo
            - domicilio
         - datos_bancarios:
            - banco
            - cuenta
            - clabe
         - tallas:
            - camisa
            - pantalon
            - zapatos
         - clave_pagadora
         - nomina
            - year: (ej 2019)
               - semana: (ej 1)
                  - lunes:
                     - obra (nombre) 
                     - proceso (clave) (Si obra es "Atencion a Clientes" proc es cliente, "Vacaciones" si Vacaciones)
                     - asistencia (bool)
                  - martes:
                     - obra (nombre) 
                     - proceso (clave) (Si obra es "Atencion a Clientes" proc es cliente, "Vacaciones" si Vacaciones)
                     - asistencia (bool)
                  - miercoles:
                     - obra (nombre) 
                     - proceso (clave) (Si obra es "Atencion a Clientes" proc es cliente, "Vacaciones" si Vacaciones)
                     - asistencia (bool)
                  - jueves:
                     - obra (nombre) 
                     - proceso (clave) (Si obra es "Atencion a Clientes" proc es cliente, "Vacaciones" si Vacaciones)
                     - asistencia (bool)
                  - viernes:
                     - obra (nombre) 
                     - proceso (clave) (Si obra es "Atencion a Clientes" proc es cliente, "Vacaciones" si Vacaciones)
                     - asistencia (bool)
                  - horas_extra:
                     - por push:
                        - fecha (timestamp)
                        - obra 
                        - proceso (Si obra es "Atencion a Clientes" proc es cliente)
                        - horas (en horas)
                  - diversos
                     - por push:
                        - cantidad
                        - distribuible: bool
                        - obra: ("NA" si distribuilble == true) 
                        - proceso: ("NA" si distribuilble == true) (Si obra es "Atencion a Clientes" proc es cliente)
                        - diverso (nombre de un catálogo)
                  - total_diversos (No incluyen impuestos)
                  - total_horas_extra (en $ y sin impuestos)
                  - total_asistencia (sueldo_base * asistencias)
                  - impuestos:
                     - impuestos_horas_extra
                     - impuestos_diversos
                     - impuestos_asistencia (pagadora_trabajador - 3 totales - impu_div - impu_HE)
                  - total (pagadora)
   - pagos_nomina: 
      - AFECTAN: app_pagos_nomina, app_asistencia
      - SUSCRIBEN: 
      - year: (ej 2019)
         - semana: (ej 1)
            - terminada: bool
            - asistencias_terminadas: bool
            - horas_extra_terminadas: bool
            - diversos_terminados: bool
            - total
            - obra: (por nombre) (Una es "Atencion a Clientes")
               - total (refleja TOTAL de kaizen)
               - supervisores:
                  - supervisor (por uid)
                     - porcentaje (ej 30)
                     - cantidad (= % * sueldo_base o pago nomina)
               - trabajadores:
                  - trabajador: (por id)
                     //- nombre NOSTA
                     - dias 
                        - lunes:
                           - asistencia: bool
                           - proceso: (clave) "NA" si asistencia es false, "vacaciones" si obra es vacaciones
                        - martes:
                           - asistencia: bool
                           - proceso: (clave) "NA" si asistencia es false, "vacaciones" si obra es vacaciones
                        - miercoles:
                           - asistencia: bool
                           - proceso: (clave) "NA" si asistencia es false, "vacaciones" si obra es vacaciones
                        - jueves:
                           - asistencia: bool
                           - proceso: (clave) "NA" si asistencia es false, "vacaciones" si obra es vacaciones
                        - viernes:
                           - asistencia: bool
                           - proceso: (clave) "NA" si asistencia es false, "vacaciones" si obra es vacaciones
                     - horas_extra:
                        - push:
                           - horas (EN $)
                           - proceso (clave)
                           - fecha (ms, de un datepicker, es de cuando se trabajaron, no de cuando se pagan)
                     - diversos (SE GUARDAN HASTA EL TERMINAR, POR LOS DISTRIBUIBLES)
                        - por push: (si es distribuido se hacen entradas separadas)
                           - cantidad
                           - proceso 
                           - diverso (nombre de un catálogo)
                     - total_horas_extra (en $ y No incluyen impuestos)
                     - total_diversos (No incluyen impuestos)
                     - total_asistencia
                     - impuestos:
                        - impuestos_horas_extra
                        - impuestos_diversos
                        - impuestos_asistencia (impuestos_asistencia_trabajador * asistencias_esta_obra/asistencias totales)
                     - total (subtotal + impuestos)
  
STORAGE:
- personal
   - persona (por uid)
      - imagen de perfil
- obras
   - contratos
      - contrato (por clave)
         - solped (por clave)
            - imagen
            - odecs
               - odec(por clave)
                  - imagen
                  - pagos
                     - imagenes
   - procesos
      - proceso (clave)
         - subprocesos (si aplica)
            - subproceso (clave)
               - pagos
                  - imagenes




- pad:
  - uid
  - timestamp
  
- kaizen: (Mayúsculas en caso de que haga falta llenarlas desde un excel)
  - PROYECTOS:
     - PPTO -> Admin/prod
     - PAG -> SCORE (yo)
  - PRODUCCION:
     - SUMINISTROS:
        - CUANT -> Proyectos
        - OdeC -> Compras
        - PAG -> Compras
     - COPEO:
        - PREC -> supervisor
        - COPEO -> supervisor
        - PAG -> rrhh
  - ADMINISTRACION:
     - ESTIMACIONES:
        - PPTO -> admin
        - EST -> supervisor
        - PAG -> admin
     - ANTICIPOS:
        - PPTO -> admin
        - PAG -> admin
  - PROFIT:
     - PROG:
        - BRUTO -> NADIEEEEE
        - NETO -> NADIEEEEE
     - REAL:
        - BRUTO -> NADIEEEEE
        - NETO -> NADIEEEEE
  
  - Para calcular AVANCE (no sale en nuestra bd pero se puede calcular al displayearla):
      - PAG = prod.copeo.pag / prod.copeo.copeo
      - REAL = admin.est.est / admin.est.ppto

  - Para calcular el PROFIT PROG
      - (admin.est.ppto + admin.ants.ppto)*0.8 - prod.copeo.(copeo) - prod.sum.(cuant) - proy.ppto